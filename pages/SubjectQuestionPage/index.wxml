<wxs src="../../utils/config.wxs" module="utils"></wxs>


<view class='init'>
  <view class='header' wx:if="{{poolData.type !=='moni'}}">
    <span>
      <span class='modeBtn {{!isSeeMode && "active"}}' bindtap="setIsSeeMode" data-item="false">
        答题模式
      </span>
      <span class='modeBtn {{isSeeMode && "active"}}' bindtap="setIsSeeMode" data-item="true">
        背题模式
      </span>
    </span>
    <Restart poolId='{{poolId}}' bindReSet='onReSet'>
      <span class='modeBtn'>重做</span>
    </Restart>
  </view>

  <!-- {/*广告*/} -->
  <view class='adBanner' />

  <!-- 答题内容 -->
  <view class='content' id="questionBody">
    <VisSwiper id="swiper" swiperHeight="{{swiperHeight}}"list="{{subjectData}}" current="{{currentIndex}}" urlPrefix='{{urlPrefix}}' stepFolder='{{stepFolder}}' optionIndex='{{optionIndex}}' isSelected='{{isSelected}}' isNowWrong='{{isNowWrong}}' isSeeMode='{{isSeeMode}}' wrongHistory='{{wrongHistory}}' rightHistory='{{rightHistory}}' bindOptionSelect='onAnswerSelect' bindAnswerConfirm='onAnswerConfirm' bindOnLast='last' bindOnNext='next'  />

  </view>

  <!-- 答题操作 -->
  <span class="NextLastBox">
    <view class='controlBtn lastBtn' wx:if="{{currentIndex > 0}}" bindtap="last">
      上一题
    </view>
    <view class='controlBtn nextBtn' bindtap="next">
      {{isDisabledNext ? '没有下一题了' : '下一题'}}
    </view>
  </span>

  <!-- 底部操作 -->
  <view class='footer'>
    <span>
      <!-- 错题 -->
      <span class='collect' wx:if="{{poolType === 'myWrong'}}">
        <span class='tips'>做对后移除错题</span>
        <switch checked='{{isWrongDelete}}' type='checkbox' bindchange="onWrongSwitchChange" />
      </span>
      <!-- 完成 -->
      <Finish wx:if="{{poolData.type === 'moni'}}" poolId='{{poolId}}' bindOnSubmit='onSubmit' userSubjectData='{{userSubjectData}}' step='{{step}}' poolData='{{poolData}}' bindReSet='onReSet'>
        <span class='finishItem'>
          <image class='finishIcon' src='../../images/subjectIconSeven.png' mode="widthFix" />交卷
        </span>
      </Finish>
    </span>

    <span wx:if="{{poolData.type ==='moni'}}">
      <SubjectCountdown mss='{{userSubjectData.limitTime}}' poolData='{{poolData}}' bindSetLocal='setLocal' />
    </span>
    <span>
      <CurrentIndexSelector poolId='{{poolId}}' userPoolId='{{userPoolId}}' userSubjectData='{{userSubjectData}}' bindCurrentChange='CurrentChange'>
        <span class='rightInfo'>
          <span class='iconItem' wx:if="{{poolType !== 'myWrong'}}">
            <image class='icon' src='../../images/icon/right.png' mode="widthFix" />
            {{userSubjectData.rightSubjectIds.length}}
          </span>
          <span class='iconItem' wx:if="{{poolType !== 'myWrong'}}">
            <image class='icon' src='../../images/icon/wrong.png' mode="widthFix" />
            {{userSubjectData.wrongSubjectItems.length}}
          </span>
          <span class='iconItem'>
            <image class='icon' src='../../images/icon/more.png' mode="widthFix" />
            <span><b>{{currentIndex + 1}}</b>/{{poolData.subjectCount || subjectData.length || 0}}</span>
          </span>
        </span>
      </CurrentIndexSelector>
    </span>
  </view>
</view>

<Colloct />

<CheckIsVip poolData='{{poolData}}' poolId='{{poolId}}' isVipValid='{{isItemValid}}' step='{{step}}' currentIndex='{{currentIndex}}' bindOnBuySuccess='onBuySuccess' />